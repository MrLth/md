# 1. 盒子模型

## 1.1 组成

1. 内容 **content**
2. 填充 **padding**
3. 边框 **border**
4. 边界 **margin**

## 1.2 分类

1. **IE盒子模型** **border-box**，width，height 包含 content、border、padding

 	2. **W3C**标准盒子模型 **content-box** ，width，height 只包含 content

## 1.3 box-sizing

​	在 IE8+ 的浏览器可以通过 box-sizing 来控制使用的盒子的模型，默认值为 **content-box**

# 2. BFC

​	Block formatting context 块级格式化上下文，是一个独立的布局环境，可以理解为一个容器，在这个容器中布局的元素，不会影响到容器外的元素，外部的元素的布局也不会影响到容器内部的元素

**如何创建**

1. 根元素或者包含根元素的元素
2. position = absolute | fixed
3. float != none
4. display = inline-block | flex | inline-flex | table-cell | table-caption
5. overflow != visible 

# 3. IFC

​	Inline formatting context 行内格式化上下文，它有以下布局规则：

1. IFC 内部的盒子会在水平方向，一个接一个地放置
2. 当一行不够时，会自动切换到下一行
3. 行级上下文的高度由内部最高的内联盒子的高度决定

# 4. 各个盒子之间的关系

1. 内容区域（contentarea）指一种围绕文字看不见的盒子，其大小仅受字符本身特性控制，本质上是一个字符盒子（characterbox）。但是如图片这类的替换元素，显然不是字符盒子，对于这类元素 ，内容区域可以看作元素自身
2. 内联盒子（inlinebox），内联盒子不会让内容成块显示，而是排成一行，这里的内联盒子实际就是指元素的外在例子，用来决定元素是内联还是块级。该盒子又可以细分为“匿名内联盒子”和“内联盒子”两种
3. 行框盒子（linebox），每一行就是一个“行框盒子”，每个“行框盒子”由若干个“内联盒子”组成
4. 包含块，由一行一行的“行框盒子”组成

# 5. 幽灵空白节点

​	一种特殊的行内盒子，只在 HTML5 中出现，实际上也是一个盒子，不过是个假想盒，名叫“strut”，中文直译为“支柱”，是一个存在于每个“行框盒子”前面，同时**具有**该元素的字体和行高属性的0 宽度的内联盒。

> Each line box starts with a zero-width inline box with the element’s font and line
> height properties. We call that imaginary box a “strut”.

​	

# 6. 替换元素

​		修改元素的某个属性值，它的呈现内容就可以被替换的元素就称为“替换元素”，例如：`<img>、<object>、<vedio>、<input>、<iframe>、<select>`

**其它特性**

1. 所有替换元素都是内联元素，虽然有的是 `inline`，有的是 `inline-block`
2. 内容的外观不受 CSS 影响，除非其自身暴露的样式接口
3. 替换元素有自己的固有尺寸，如 `<vedio>、<iframe>、<canvas>`为 `300x150`
4. 在很多 CSS 样式上有自己的一套表现规则 ，如 `vertical-algin` 的 `baseline` 的含义就与非替换元素不同
   1. 非替换元素：文字基线（字符的下边缘）
   2. 替换元素：元素的下边缘



# 4. 清除浮动的原因和方法

 	当元素浮动后，不再属于文档流中的普通流，不会影响块级元素的布局（但此时浮动元素已经从普通流中移除了，所以前移是必要的），只会影响行内元素的布局，此时文档流中的普通流就会表现得不同寻常，而当包含块的高度小于浮动元素时，还会发生高度塌陷，影响包含块后面的元素的布局

**清除方法**

1. clear
2. 将父元素独立为一个新 BFC

# 5. clear 清除浮动的原理

```scss
clear: both | left | right | none
```

​	从字面上看，`clear:left` 是清除左浮动，`clear:right` 是清除右浮动，实际上，这种解释并不对，因为浮动一直还在，并没有清除，官方对 clear 的解释是 **元素盒子的边不能和前面的浮动元素相邻**，换言之，clear 是为了清除浮动元素对该元素的影响，而不是清除掉浮动。

```scss
.clear::after{
	content: '';
    display: block; // clear 只对块级元素有效
    clear:both; // 父元素最后一个块不受浮动元素的影响，那么他的定位就是正常的，也就把父元素的高度撑开了
}
```

> ​	由于 float 同一时刻只能为 left 或者 right，并且 clear 对后面的浮动元素是不管的，因此，clear:right 有效的时候，clear:left 必定无效，等同于设置 clear:both；clear:left 有效的时候，clear:right 必定无效，也等同于设置 clear:both。所以在任何时候，clear:both 完全可以代替 clear:right 和 clear: left

# 6. zoom: 1 清除浮动的原理

​	zoom 是 IE 浏览器专有属性，它可以设置或检索对象的绽放比例。解决 IE 下比较奇葩的 BUG，如 margin 重叠、清除浮动、触发 hasLayout等。

​	当设置了 zoom 的值后，所元素的元素就会放大或者缩小，浏览器就会重新计算元素的高度和宽度，从而触发重排，通过这个原理也就解决了 IE 下子元素浮动的时候父元素不随着自动扩大的问题

> zoom 已经出现在 CSS 3.0 的草案中

# 2. 元素居中

## 2.1 宽高固定

1. `margin:auto` 实现水平居中
2. 绝对定位，`top:50%;left:50%` 加上 `负margin`
3. 绝对定位，四个方向的值都为`0`， 设置 `magin:auto`

## 2.2 宽高不定

4. `flex`布局，`justify-content:center;align-items:center`
5. 绝对定位，`top:50%;left:50%` 配合 `transform:translate(-50%, -50%)`

# 3. CSS 实现 三角形

## 3.1 border

​	元素宽高均设为 0 ，只设置 border，然后隐藏掉另外三边，剩下的就是一个三角形

# 4. CSS 实现多列等高

1. flex 布局， align-content:strech

2. display:table-cell，表格的单元格高度相等

3. position:absolute; top:0; bottom:0

4. ```scss
   .box {
       overflow:hidden // 创建 BFC ,清除浮动
   }
   .box > div{
       padding-bottom: 10000px; // 顶开背景色的高度
       margin-bottom:-10000px; // 收缩高度
       float:left; // 水平分布
   }
   ```

   

# 5. 包含块

​	当元素被赋予了百分比值时，它的计算值就是由这个元素的包含块计算而来的，主要包括以下属性：

1. **`height、top、bottom`**的百分比，是通过包含块的 **`height`** 来计算的

> 如果包含块没有指定 height，使包含块的 height 根据它的内容变化 ，而且包含块的 position 为 relative 或者 static ，那么这些值的计算结果为 auto

2. **`width、left、right、padding、margin`**的百分比，是通过包含块的 **`width`** 来计算的

## 5.1 确定包含块

确定一个元素的包含块的过程完全依赖于这个元素的 [`position`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/position) 属性：

1. 根元素（很多情况下可以看作是 <html>）被称为**初始包含块**，其尺寸等于浏览器视口的大小
2. 如果 position 属性为 `static` 、 `relative` 或 `sticky`，包含块可能由它的最近的祖先**块元素**（比如说inline-block, block 或 list-item元素）的内容区的边缘组成，也可能会建立格式化上下文(比如说 a table container, flex container, grid container, 或者是 the block container 自身)。
3. 如果 position 属性为 `absolute` ，包含块就是由它的最近的 position 的值不是 `static` （也就是值为`fixed`, `absolute`, `relative` 或 `sticky`）的祖先元素的内边距区的边缘组成。
4. 如果 position 属性是 **`fixed`**，在连续媒体的情况下(continuous media)包含块是 [viewport](https://developer.mozilla.org/zh-CN/docs/Glossary/Viewport) ,在分页媒体(paged media)下的情况下包含块是分页区域(page area)。
5. 如果 position 属性是 `absolute` 或 `fixed`，包含块也可能是由满足以下条件的最近父级元素的内边距区的边缘组成的：
   1.  [`transform`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform) 或 [`perspective`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/perspective) 的值不是 `none`
   2.  [`will-change`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/will-change) 的值是 `transform` 或 `perspective`
   3.  [`filter`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/filter) 的值不是 `none` 或 `will-change` 的值是 `filter`(只在 Firefox 下生效).
   4.  [`contain`](https://developer.mozilla.org/zh-CN/docs/Web/CSS/contain) 的值是 `paint` (例如: `contain: paint;`)

## 5.2 position 为 absolute 与正常流元素的包含块的区别

1. 内联元素也可以作为包含块
2. 一般包含块所在并非父元素，而是祖辈元素中第一个 position 不为 static 的元素
3. 边界是 paddingBox 而不是 content

# CSS + JS 实现全屏滚动

```scss
.parent{
    height:100vh;
    overflow:hidden;
    positon:relative;
}
.parent>.wrapper{
    postion:absolute;
    transition: all .1s ease
}
.wrapper>.child{
    height:100vh
}
```

# 视差滚动

​	多层背景以不同速度移动，形成立体的运动效果，带来非常出色的视觉效果。

**思路1**

1. 多层背景分别设置高度，如近 100vh ，中 75 vh ，远 50 vh。
2. 监听 mousewheel 事件，每次触发时获取 scrollTop，按比例移动三个图层，如近移动 2px，远只需要移动 1px

**思路2**

1. 使用队列保存动画函数，如 `{triggerTop:100, animateFn:()=>{}}`
2. 监听 mousewheel 事件，每次触发时获取 scrollTop，满足条件的动画函数执行并从队列中移除
3. 所有动画都执行完后停止监听

# 响应式布局

​	本质利用媒体查询在不同分辨率使用不同样式，达到不同屏幕大小的设备显示特定的内容。